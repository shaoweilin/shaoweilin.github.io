
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Parametric typeclasses aid generalization in program synthesis" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://shaoweilin.github.io/posts/2022-05-08-parametric-typeclasses-aid-generalization-in-program-synthesis/" />
<meta property="og:site_name" content="Types from Spikes" />
<meta property="og:description" content="We envision programming being done in top-down fashion. The human describes the goal (e.g. sorting), and the machine reduces it to smaller subgoals based on well-known heuristics (e.g. divide and c..." />
<meta property="og:image" content="https://shaoweilin.github.io/_static/profile.jpg" />
<meta property="og:image:alt" content="Types from Spikes" />
<meta name="description" content="We envision programming being done in top-down fashion. The human describes the goal (e.g. sorting), and the machine reduces it to smaller subgoals based on well-known heuristics (e.g. divide and c..." />

    <title>Parametric typeclasses aid generalization in program synthesis &#8212; Types from Spikes  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=8a9ddf57" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css?v=995e94df" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.min.css?v=21c0b90a" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=187304be"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'posts/2022-05-08-parametric-typeclasses-aid-generalization-in-program-synthesis';</script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../../about/" />
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" /> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../blog/atom.xml"
  title="Types from Spikes"
/>
  
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search"
         aria-label="Search"
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../">
  
  
  
  
  
  
    <p class="title logo__title">Types from Spikes</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../blog/">
    Blog
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/shaoweilin/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../blog/">
    Blog
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/shaoweilin/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"> 
<div class="ablog-sidebar-item ablog__postcard">
   
  <h2>
     
    <i class="fa fa-calendar"></i>
    
    <span>22 January 2022</span>
    
  </h2>
  <ul>
    <div class="ablog-sidebar-item ablog__postcard2">
        
</div>
  </ul>
</div>
</div>
        <div class="sidebar-primary-item"> 
<div class="ablog-sidebar-item ablog__recentposts">
  <h3>
    <a href="../../blog/">Recent Posts</a>
  </h3>
  <ul>
     
    <li>
      <a href="../2025-01-10-relative-information-and-the-dual-numbers/">
        10 January - Relative information and the dual numbers
      </a>
    </li>
    
    <li>
      <a href="../2024-10-16-singular-learning-relative-information-and-the-dual-numbers/">
        16 October - Singular learning, relative information and the dual numbers
      </a>
    </li>
    
    <li>
      <a href="../2024-10-01-program-synthesis/">
        01 October - Program Synthesis
      </a>
    </li>
    
    <li>
      <a href="../2024-09-24-safety-by-shared-synthesis/">
        24 September - Safety by shared synthesis
      </a>
    </li>
    
    <li>
      <a href="../2024-05-22-formal-ai-assisted-code-specification-and-synthesis-concrete-steps-towards-safe-sociotechnical-systems/">
        22 May - Formal AI-assisted code specification and synthesis: concrete steps towards safe sociotechnical systems
      </a>
    </li>
    
  </ul>
</div>
</div>
        <div class="sidebar-primary-item"> 
<div class="ablog-sidebar-item ablog__archive">
  <h3>
    <a href="../../blog/archive/">Archives</a>
  </h3>
  <ul>
     
    <li>
      <a href="../../blog/2025/">2025 (1)</a>
    </li>
      
    <li>
      <a href="../../blog/2024/">2024 (5)</a>
    </li>
      
    <li>
      <a href="../../blog/2023/">2023 (5)</a>
    </li>
      
    <li>
      <a href="../../blog/2022/">2022 (3)</a>
    </li>
      
    <li>
      <a href="../../blog/2021/">2021 (8)</a>
    </li>
      
    <li>
      <a href="../../blog/2020/">2020 (12)</a>
    </li>
      
    <li>
      <a href="../../blog/2018/">2018 (1)</a>
    </li>
      
    <li>
      <a href="../../blog/2017/">2017 (1)</a>
    </li>
      
    <li>
      <a href="../../blog/2016/">2016 (3)</a>
    </li>
      
    <li>
      <a href="../../blog/2014/">2014 (2)</a>
    </li>
      
    <li>
      <a href="../../blog/2012/">2012 (1)</a>
    </li>
     
  </ul>
</div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Parametric typeclasses aid generalization in program synthesis</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section class="tex2jax_ignore mathjax_ignore" id="parametric-typeclasses-aid-generalization-in-program-synthesis">
<h1>Parametric typeclasses aid generalization in program synthesis<a class="headerlink" href="#parametric-typeclasses-aid-generalization-in-program-synthesis" title="Link to this heading">#</a></h1>
<p>We envision programming being done in top-down fashion. The human describes the goal (e.g. sorting), and the machine reduces it to smaller subgoals based on well-known heuristics (e.g. divide and conquer). The easier subgoals could even be fulfilled automatically. This top-down heuristics approach will be more amenable to machine learning. See my <a class="reference internal" href="../2021-04-22-proofs-as-programs-challenges-and-strategies-for-program-synthesis/"><span class="std std-doc">Topos Institute talk</span></a> for more info.</p>
<section id="challenges-in-applying-machine-learning-to-program-synthesis">
<h2>Challenges in applying machine learning to program synthesis<a class="headerlink" href="#challenges-in-applying-machine-learning-to-program-synthesis" title="Link to this heading">#</a></h2>
<p>The problem with the current approach in type theory is as follows.</p>
<ol class="arabic simple">
<li><p>Programs are presented in a bottom-up fashion (e.g. defining insertions before defining insertion-sort). It is hard to see the parts of the proof which can be generalized to produce more powerful principles (e.g. divide and conquer) for problem solving.</p></li>
<li><p>When solving for a goal, the human/machine needs to remember the specific name (e.g. list_recursion) of the theorem to apply, rather than a general name (e.g. tree_recursion) parametrized by types/operators - parameters which can then be solved during proof search. As a result, a learning machine may think an algorithm works because of a specific function, rather than a more general principle.</p></li>
</ol>
</section>
<section id="parametricity-to-the-rescue">
<h2>Parametricity to the rescue<a class="headerlink" href="#parametricity-to-the-rescue" title="Link to this heading">#</a></h2>
<p>This second point about using parametric classes to organize types (e.g. reflexivity) and operators (e.g. equality) and to overload notation, is known as parametricity. This idea is not new and has been explored by both category theorists and type theorists.</p>
<p>However, I believe Haskell was the first programming language to make serious use of classes (not the same as interfaces in object-oriented programming) to simplify code, and Coq and other proof assistants followed suit. As Bas Spitters mentioned in his paper, there is more we need to do to really make this a game changer, e.g. unification hints and rewriting/normalization rules.</p>
</section>
<section id="examples-of-parametric-strategy">
<h2>Examples of parametric strategy<a class="headerlink" href="#examples-of-parametric-strategy" title="Link to this heading">#</a></h2>
<p>For example, equivalence between types can be captured by parametric classes, and the seminal paper <em>Changing Data Structures in Type Theory: A Study of Natural Numbers</em>(2000) by Magaud and Bertot <span id="id1">[<a class="reference internal" href="#id15" title="Nicolas Magaud and Yves Bertot. Changing data structures in type theory: a study of natural numbers. In International Workshop on Types for Proofs and Programs, 181–196. Springer, 2000.">MB00</a>]</span> describes how to extend types equivalences to constructions involving those types in a systematic way. Automated transport along equivalences is important if we want to switch between unary and binary numbers for efficiency in automated programming.</p>
<p>The 2021 paper *The Marriage of Univalence and Parametricity *(2021) by Tabareau, Tanter and Sozeau <span id="id2">[<a class="reference internal" href="#id16" title="Nicolas Tabareau, Éric Tanter, and Matthieu Sozeau. The marriage of univalence and parametricity. Journal of the ACM (JACM), 68(1):1–44, 2021.">TTS21</a>]</span> summarizes the latest strategies in parametric transport, and relates them to univalent transport from homotopy type theory. There is also heavy use of classes in their approach.</p>
</section>
<section id="example-noetherian-induction">
<h2>Example - Noetherian induction<a class="headerlink" href="#example-noetherian-induction" title="Link to this heading">#</a></h2>
<p>Let me end with a specific example involving well-founded relations and Noetherian induction.</p>
<p>Given a type A and a relation (R : A -&gt; A -&gt; Prop), we recursively define a term (x : A) to be accessible if y is accessible for all {y : A | R y x}. We say that R is well-founded if all terms (x : A) are accessible. It is a theorem that given a well-founded relation R and a predicate (P : A -&gt; Prop), we can do Noetherian induction, i.e. suppose for all (x :A), we have (P x) if (P y) for all {y : A | R y x}; then (P x) for all (x : A).</p>
<p>If we do this without classes, we will have to carry a lot of information around with us. Let “Rwf” be the proof of the well-foundedness of R. Let “wf_implies_noetherian” be the function that takes in a proof of well-foundedness, and spits out a proof of noetherian-ness. Then, to do noetherian induction, we would have to apply “wf_implies_noetherian Rwf” at the start of our proof. See <a class="github reference external" href="https://github.com/coq/coq/blob/master/theories/Init/Wf.v#L55">coq/coq</a>.</p>
<p>If we do this with classes, we could have a class “Wellfounded” of all relations that are well-founded. We could also have a class “Noetherian” of all relations for which we can perform Noetherian induction. In this class, we have a generic name “noetherian_rect”
(noetherian recursion for types) for the proof of noetherian-ness.</p>
<p>We would then have R as an instance of Wellfounded, and S as an instance of Noetherian for all well-founded S. If we have a situation where Noetherian induction might be applicable, we just need to apply “noetherian_rect” with no extra parameters. The proof assistant will now compare the goal with the statement of noetherian-ness to guess what the relation R may be. It will then try to find an instance of the “Noetherian R” class, which could be something from the “Wellfounded R” class. Finally, it tries to find an instance of “Wellfounded R” and it sees that an instance was previously registered. All of this searching happens automatically in the background and no extra information needs to be carried by the human or learning machine. See below for the partial code (full code <a class="reference external" href="https://w3id.org/people/shaoweilin/public/parametricity.v">here</a>)</p>
<div class="highlight-coq notranslate"><div class="highlight"><pre><span></span><span class="kn">Inductive</span> <span class="n">Acc</span> <span class="o">`(</span><span class="n">R</span> <span class="o">:</span> <span class="n">relation</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="n">Acc_intro</span> <span class="o">:</span> <span class="o">(</span><span class="k">forall</span> <span class="n">y</span><span class="o">:</span><span class="n">A</span><span class="o">,</span> <span class="n">R</span> <span class="n">y</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">Acc</span> <span class="n">R</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">Acc</span> <span class="n">R</span> <span class="n">x</span><span class="o">.</span>

<span class="kn">Class</span> <span class="n">Wellfounded</span> <span class="o">`(</span><span class="n">R</span> <span class="o">:</span> <span class="n">relation</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">wellfoundedness</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">a</span><span class="o">:</span><span class="n">A</span><span class="o">,</span> <span class="n">Acc</span> <span class="n">R</span> <span class="n">a</span><span class="o">.</span>

<span class="kn">Class</span> <span class="n">Noetherian</span> <span class="o">`(</span><span class="n">R</span> <span class="o">:</span> <span class="n">relation</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">noetherian_rect</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">P</span><span class="o">:</span><span class="n">A</span> <span class="o">-&gt;</span> <span class="kt">Type</span><span class="o">,</span>
    <span class="o">(</span><span class="k">forall</span> <span class="n">x</span><span class="o">:</span><span class="n">A</span><span class="o">,</span> <span class="o">(</span><span class="k">forall</span> <span class="n">y</span><span class="o">:</span><span class="n">A</span><span class="o">,</span> <span class="n">R</span> <span class="n">y</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">P</span> <span class="n">y</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">P</span> <span class="n">x</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">forall</span> <span class="n">a</span><span class="o">:</span><span class="n">A</span><span class="o">,</span> <span class="n">P</span> <span class="n">a</span><span class="o">.</span>

<span class="kn">Instance</span> <span class="n">wellfounded_as_noetherian</span> <span class="o">`(</span><span class="n">R</span> <span class="o">:</span> <span class="n">relation</span> <span class="n">A</span><span class="o">)</span> <span class="o">`(</span><span class="n">Wellfounded</span> <span class="n">A</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">Noetherian</span> <span class="n">R</span><span class="o">.</span>
<span class="kn">Proof</span><span class="o">.</span> <span class="k">intro</span><span class="o">.</span> <span class="k">intros</span><span class="o">;</span> <span class="k">apply</span> <span class="o">(@</span><span class="n">Acc_rect</span> <span class="n">A</span> <span class="n">R</span><span class="o">);</span> <span class="k">auto</span><span class="o">.</span> <span class="kn">Qed</span><span class="o">.</span>

<span class="kn">Section</span> <span class="n">BinaryTree</span><span class="o">.</span>

<span class="kn">Variable</span> <span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">.</span>

<span class="kn">Definition</span> <span class="n">lengthOrder</span> <span class="o">(</span><span class="n">ls1</span> <span class="n">ls2</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">)</span> <span class="o">:=</span> <span class="n">length</span> <span class="n">ls1</span> <span class="o">&lt;</span> <span class="n">length</span> <span class="n">ls2</span><span class="o">.</span>

<span class="kn">Lemma</span> <span class="n">lengthOrder_wf&#39;</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">len</span><span class="o">,</span> <span class="k">forall</span> <span class="n">ls</span><span class="o">,</span>
  <span class="n">length</span> <span class="n">ls</span> <span class="o">&lt;=</span> <span class="n">len</span> <span class="o">-&gt;</span> <span class="n">Acc</span> <span class="n">lengthOrder</span> <span class="n">ls</span><span class="o">.</span>
<span class="kn">Proof</span><span class="o">.</span> <span class="o">[...]</span> <span class="kn">Defined</span><span class="o">.</span>

<span class="kn">Instance</span> <span class="n">lengthOrder_wf</span> <span class="o">:</span> <span class="n">Wellfounded</span> <span class="n">lengthOrder</span><span class="o">.</span>
<span class="kn">Proof</span><span class="o">.</span> <span class="o">[...]</span> <span class="kn">Defined</span><span class="o">.</span>

<span class="kn">Fixpoint</span> <span class="n">combine</span> <span class="o">(</span><span class="n">ls1</span> <span class="n">ls2</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">ls1</span><span class="o">,</span> <span class="n">ls2</span> <span class="k">with</span>
  <span class="o">|</span> <span class="n">nil</span><span class="o">,</span> <span class="n">l2</span> <span class="o">=&gt;</span> <span class="n">l2</span>
  <span class="o">|</span> <span class="n">l1</span><span class="o">,</span> <span class="n">nil</span> <span class="o">=&gt;</span> <span class="n">l1</span>
  <span class="o">|</span> <span class="n">h1</span> <span class="o">::</span> <span class="n">t1</span><span class="o">,</span> <span class="n">h2</span> <span class="o">::</span> <span class="n">t2</span> <span class="o">=&gt;</span> <span class="n">h1</span> <span class="o">::</span> <span class="n">h2</span> <span class="o">::</span> <span class="n">combine</span> <span class="n">t1</span> <span class="n">t2</span>
  <span class="k">end</span><span class="o">.</span>

<span class="kn">Theorem</span> <span class="n">tree_rect</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span> <span class="o">-&gt;</span> <span class="kt">Type</span><span class="o">),</span>
   <span class="n">P</span> <span class="n">nil</span> <span class="o">-&gt;</span>
  <span class="o">(</span><span class="k">forall</span> <span class="n">t</span> <span class="o">:</span> <span class="n">T</span><span class="o">,</span> <span class="n">P</span> <span class="o">(</span><span class="n">cons</span> <span class="n">t</span> <span class="n">nil</span><span class="o">))</span> <span class="o">-&gt;</span>
  <span class="o">(</span><span class="k">forall</span> <span class="n">l0</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">P</span> <span class="n">l0</span> <span class="o">-&gt;</span> <span class="k">forall</span> <span class="n">l1</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">P</span> <span class="n">l1</span> <span class="o">-&gt;</span>
   <span class="n">P</span> <span class="o">(</span><span class="n">combine</span> <span class="n">l0</span> <span class="n">l1</span><span class="o">))</span> <span class="o">-&gt;</span>
  <span class="o">(</span><span class="k">forall</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">P</span> <span class="n">l</span><span class="o">).</span>
<span class="kn">Proof</span><span class="o">.</span> <span class="k">intros</span><span class="o">.</span> <span class="k">apply</span> <span class="n">noetherian_rect</span><span class="o">.</span> <span class="k">intros</span><span class="o">.</span> <span class="o">[...]</span> <span class="kn">Qed</span><span class="o">.</span>

<span class="kn">End</span> <span class="n">BinaryTree</span><span class="o">.</span>
</pre></div>
</div>
<p>In Coq, a similar proof-search is done when we use the tactic “reflexivity.” The proof assistant searches for instances of the Reflexive class. Users can extend the Reflexive class with their own instances to make the tactic more powerful.</p>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>You can see why such parametric strategies make problem-solving extremely compositional and top-down. They are inherently categorical (generalized algebraic theoretical to be precise) because the classes encode the relational properties of the types/operators but hides the underlying implementations. Proof-search at the top level can automatically trigger appropriate proof-search at lower levels.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<div class="docutils container" id="id3">
<div role="list" class="citation-list">
<div class="citation" id="id15" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">MB00</a><span class="fn-bracket">]</span></span>
<p>Nicolas Magaud and Yves Bertot. Changing data structures in type theory: a study of natural numbers. In <em>International Workshop on Types for Proofs and Programs</em>, 181–196. Springer, 2000.</p>
</div>
<div class="citation" id="id16" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">TTS21</a><span class="fn-bracket">]</span></span>
<p>Nicolas Tabareau, Éric Tanter, and Matthieu Sozeau. The marriage of univalence and parametricity. <em>Journal of the ACM (JACM)</em>, 68(1):1–44, 2021.</p>
</div>
</div>
</div>
</section>
</section>

<div class="section ablog__blog_comments">
     
<div class="section ablog__prev-next">
  <span class="ablog__prev">
     
    <a href="../2022-01-22-information-topos-theory-motivation/">
      
      <i class="fa fa-arrow-circle-left"></i>
      
      <span>Information topos theory - motivation</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
     
    <a href="../2022-05-28-likelihood-greed-and-temperature-in-sequence-learning/">
      <span>Likelihood, greed and temperature in sequence learning</span>
      
      <i class="fa fa-arrow-circle-right"></i>
      
    </a>
    
  </span>
</div>
  
</div>

                </article>
              
<p style="margin-bottom:5em;"></p>
<!-- Add a comment box underneath the page's content -->
<script src="https://giscus.app/client.js"
        data-repo="shaoweilin/shaoweilin.github.io"
        data-repo-id="R_kgDOHM5tAA"
        data-category="Blog comments"
        data-category-id="DIC_kwDOHM5tAM4COqgI"
        data-mapping="pathname"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-in-applying-machine-learning-to-program-synthesis">Challenges in applying machine learning to program synthesis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parametricity-to-the-rescue">Parametricity to the rescue</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples-of-parametric-strategy">Examples of parametric strategy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-noetherian-induction">Example - Noetherian induction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/posts/2022-05-08-parametric-typeclasses-aid-generalization-in-program-synthesis.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022, Shaowei Lin.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>